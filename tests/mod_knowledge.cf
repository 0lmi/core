############################################################################
#
# This is a promise/cfengine version of the Linear Topic Map language
# Topic Maps are an ISO standard, but we are trying to do something
# slightly different here, and we want to syntax to be uniform. This
# could be compiled into an ISO Topic Map? (Maybe if the promises fit..)
#
############################################################################
#
# Topics are independent abstract entities which make "use-promise" associations.
# We can assume that all topics offer their info freely to all other topics.
#
# Documents/Occurrences lie outside of a topic map in the substrate, but this
# is where promises live. Documents can make promises about their content
# and type. These supplement the topic map.
#
############################################################################

body knowledge control

{
builddir => "/tmp/documents";
default_association => "associated with";
}

############################################################################

 #
 # We introduce a "knowledge" component to cfengine 
 #

 # T - topic        = topic-agent
 # A - association  = promise
 # O - occurrence   = document-agent

############################################################################

bundle knowledge topic_map

{
vars:

  "docroot"   string => "/path/to/docs";
  "otherdocs" slist  => { "doc1", "doc2" };


  "aliases" slist => { "deals with concepts", "is composed of" };

 ###################################################

classes:

#  "scope" - how do we define this for tm ??

 ###################################################

topics:

  website::

   #

   "cfengine" -> { "cfagent", "cfservd", "cfenvd" },

         association => { 
                        @(aliases),
                        "another relation" 
                        };
    #

    "cfengine" -> { "Mark Burgess", "Bas Van der Vlies" },

         association => "has developers" ;

    #

   social::

    "Mark Burgess" -> "Steve Pepper",

         association => { "has friend", "works with", "also likes Schostakovich" };

    #

    "Mark Burgess" -> @(all_potential_mates),

        # These sound more like promises than associations.. (advertisements)

         association => "has blue eye",
         association => "has substantial depth gauge",
         association => "has poor sense of humo(u)r";


 ###################################################

occurrences: 

  # These are data/document instances

  "docid" -> @(otherdocs),

     mentions   => { "topicid1", "topicid2" },

     # assemble document

     usecontent => { 
                   "$(docroot)/textfragment1", 
                   "$(docroot)/textfragment2" 
                   },

     stylesheet => "/css/mystyle.css";

}

